= Lab 5 - Leveraging Spring Cloud Data Flow

image::/../../common/images/scdf.png[Spring Cloud Data Flow for PCF,400,200]

This lab is based off the blog link:https://content.pivotal.io/blog/building-flexible-data-pipelines-with-spring-cloud-data-flow-for-pcf[Building Flexible Data Pipelines with Spring Cloud Data Flow for PCF] written by Chris Sterling. This blog will be the basis for the lab. Don't bypass installing the Cloud Foundry CF CLI plugin, as below.

== FIRST, install the Cloud Foundry CLI Plugin
The Spring Cloud Data Flow for PCF Cloud Foundry CLI plugin is available through the Cloud Foundry Community Plugins repository.

To install the plugin, run the following command:

----
$ cf install-plugin -r CF-Community "spring-cloud-dataflow-for-pcf"
----

== Target PWS and view the PCF Marketplace
The `cf` CLI should still be targeted to `api.run.pivotal.io`. To check, run the following:

----
$ cf target
api endpoint:   https://api.run.pivotal.io
api version:    2.106.0
user:           cbusch@pivotal.io
org:            STLWorkshop
space:          instructor
----

If not, reconnect using:

----
$ cf login -a api.run.pivotal.io -u <your email> -p <password>
----

Once targeted to PWS, check the PCF Marketplace for the `dataflow` services. Find the four services shown below.

----
$ cf marketplace
....
p-dataflow                standard    Deploys Spring Cloud Data Flow servers to orchestrate data pipelines
p-dataflow-analytics      proxy       Proxies to the Spring Cloud Data Flow analytics service instance
p-dataflow-messaging      proxy       Proxies to the Spring Cloud Data Flow messaging service instance
p-dataflow-relational     proxy       Proxies to the Spring Cloud Data Flow datastore service instance
....
----

== Lab continues in blog

IMPORTANT: Check the status of `cf create-service` using `cf service <name of service>`.

Next, for the lab, visit the blog link:https://content.pivotal.io/blog/building-flexible-data-pipelines-with-spring-cloud-data-flow-for-pcf[Building Flexible Data Pipelines with Spring Cloud Data Flow for PCF] to create a service and use it in an example flow. You may read the top section of the blog or proceed directly to the section *"Getting Started: Creating Your First Data Pipeline"*.

After the lab, visit the link:http://docs.pivotal.io/scdf/index.html[Spring Cloud Data Flow for PCF] documentation. It does includes a link:http://docs.pivotal.io/scdf/getting-started.html[Getting Started with Spring CloudÂ® Data Flow for PCF] lab similar to that in the article above, but with more lab details and images. Please look there for more details about _Spring Cloud Data Flow_.

link:/README.md#course-materials[Course Materials home] | link:/session_07/lab_06/lab_06.adoc[Lab 6 - Using PCF Autoscaler]
